{% extends 'base.html' %}
{% load markup %}

{% block title %}{{ course.title }}{% endblock %}

{% block description %}{{ course.description|striptags }}{% endblock %}

{% block content %}

    <article id="{{ course.slug }}">

        <header>

            {% if user.is_staff %}
            <ul class="object-admin-navigation">
                <li><a href="{% url admin:courses_course_change course.id %}">edit</a></li>
            </ul>
            {% endif %}

            <h1>{{ course.title }}</h1>
        </header>

        <section class="body">
            {{ course.body|markdown }}
        </section>

        <section id="occurrences" class="occurrence-list">
            <h2>Coming course dates</h2>
            {% if course.get_future_occurrences %}
            <table>
                {% for occ in course.get_future_occurrences %}
                <tr>
                    <td>
                        {{ occ.start }}

                        {% if occ.end %}
                        to
                            {% if occ.end.date == occ.start.date  %}
                        {{ occ.end|time }}
                            {% else %}
                        {{ occ.end }}
                            {% endif %}
                        {% endif %}
                    </td>
                    <td>
                        <a href="{% url occurrence occ.id %}" class="button">sign up</a>
                    </td>
                </tr>
                {% endfor %}
                </table>
            {% else %}
                <p>There are no coming course dates. Contact us to let us know if you would like one scheduled.</p>
            {% endif %}
        </section>


    </article>

{% endblock %}